{"ast":null,"code":"var _jsxFileName = \"/home/jvcbyte/Downloads/ecommerce/frontend/src/pages/Search.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport ProductCard from '../components/ProductCard';\nimport './Search.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Search = () => {\n  _s();\n  const navigate = useNavigate();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const handleSearch = useCallback(async e => {\n    e.preventDefault();\n    if (searchTerm.trim() === '') return;\n    setLoading(true);\n    try {\n      const response = await fetch(`http://127.0.0.1:5000/api/products`);\n      if (!response.ok) throw new Error('Failed to fetch products');\n      const products = await response.json();\n\n      // Filter products based on search term\n      const filteredProducts = products.filter(product => product.name.toLowerCase().includes(searchTerm.toLowerCase()) || product.description.toLowerCase().includes(searchTerm.toLowerCase()));\n      setResults(filteredProducts);\n    } catch (error) {\n      console.error('Error fetching products:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [searchTerm]);\n  useEffect(() => {\n    // Get search query from URL params\n    const params = new URLSearchParams(window.location.search);\n    const query = params.get('q');\n    if (query) {\n      setSearchTerm(query);\n      handleSearch();\n    }\n  }, [handleSearch]);\n  const addToCart = product => {\n    // Get the current cart from localStorage\n    const cart = JSON.parse(localStorage.getItem('cart') || '[]');\n\n    // Check if product is already in cart\n    const existingItem = cart.find(item => item.id === product.id);\n    if (existingItem) {\n      // If product exists, update its quantity\n      const updatedCart = cart.map(item => item.id === product.id ? {\n        ...item,\n        quantity: (item.quantity || 1) + 1\n      } : item);\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\n      setResults(prev => prev.map(item => item.id === product.id ? {\n        ...item,\n        quantity: (item.quantity || 1) + 1\n      } : item));\n    } else {\n      // If product doesn't exist, add it with quantity 1\n      const newCart = [...cart, {\n        ...product,\n        quantity: 1\n      }];\n      localStorage.setItem('cart', JSON.stringify(newCart));\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Search Results\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSearch,\n      className: \"search-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: searchTerm,\n        onChange: e => setSearchTerm(e.target.value),\n        placeholder: \"Search for products...\",\n        className: \"search-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"search-button\",\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Searching for products...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }, this), results.length === 0 && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-results\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"No products found matching \\\"\", searchTerm, \"\\\"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Try searching with different keywords or check our categories page.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"products-grid\",\n      children: results.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n        product: product,\n        onAddToCart: addToCart\n      }, product.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 5\n  }, this);\n};\n_s(Search, \"liExu9OApyLmFElGvVqpmuHwW6U=\", false, function () {\n  return [useNavigate];\n});\n_c = Search;\nexport default Search;\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","ProductCard","jsxDEV","_jsxDEV","Search","_s","navigate","searchTerm","setSearchTerm","results","setResults","loading","setLoading","handleSearch","e","preventDefault","trim","response","fetch","ok","Error","products","json","filteredProducts","filter","product","name","toLowerCase","includes","description","error","console","params","URLSearchParams","window","location","search","query","get","addToCart","cart","JSON","parse","localStorage","getItem","existingItem","find","item","id","updatedCart","map","quantity","setItem","stringify","prev","newCart","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","placeholder","length","onAddToCart","_c","$RefreshReg$"],"sources":["/home/jvcbyte/Downloads/ecommerce/frontend/src/pages/Search.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport ProductCard from '../components/ProductCard';\nimport './Search.css';\n\nconst Search = () => {\n  const navigate = useNavigate();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n\n  const handleSearch = useCallback(async (e) => {\n    e.preventDefault();\n    if (searchTerm.trim() === '') return;\n\n    setLoading(true);\n    try {\n      const response = await fetch(`http://127.0.0.1:5000/api/products`);\n      if (!response.ok) throw new Error('Failed to fetch products');\n      const products = await response.json();\n      \n      // Filter products based on search term\n      const filteredProducts = products.filter(product =>\n        product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        product.description.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n      \n      setResults(filteredProducts);\n    } catch (error) {\n      console.error('Error fetching products:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [searchTerm]);\n\n  useEffect(() => {\n    // Get search query from URL params\n    const params = new URLSearchParams(window.location.search);\n    const query = params.get('q');\n    if (query) {\n      setSearchTerm(query);\n      handleSearch();\n    }\n  }, [handleSearch]);\n\n  const addToCart = (product) => {\n    // Get the current cart from localStorage\n    const cart = JSON.parse(localStorage.getItem('cart') || '[]');\n    \n    // Check if product is already in cart\n    const existingItem = cart.find(item => item.id === product.id);\n    if (existingItem) {\n      // If product exists, update its quantity\n      const updatedCart = cart.map(item => \n        item.id === product.id \n          ? { ...item, quantity: (item.quantity || 1) + 1 }\n          : item\n      );\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\n      setResults(prev => prev.map(item => \n        item.id === product.id \n          ? { ...item, quantity: (item.quantity || 1) + 1 }\n          : item\n      ));\n    } else {\n      // If product doesn't exist, add it with quantity 1\n      const newCart = [...cart, {\n        ...product,\n        quantity: 1\n      }];\n      localStorage.setItem('cart', JSON.stringify(newCart));\n    }\n  };\n\n  return (\n    <div className=\"search-container\">\n      <h1>Search Results</h1>\n      \n      <form onSubmit={handleSearch} className=\"search-form\">\n        <input\n          type=\"text\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          placeholder=\"Search for products...\"\n          className=\"search-input\"\n        />\n        <button type=\"submit\" className=\"search-button\">\n          Search\n        </button>\n      </form>\n\n      {loading && (\n        <div className=\"loading-container\">\n          <div className=\"loading-spinner\"></div>\n          <p>Searching for products...</p>\n        </div>\n      )}\n\n      {results.length === 0 && !loading && (\n        <div className=\"no-results\">\n          <p>No products found matching \"{searchTerm}\"</p>\n          <p>Try searching with different keywords or check our categories page.</p>\n        </div>\n      )}\n\n      <div className=\"products-grid\">\n        {results.map((product) => (\n          <ProductCard\n            key={product.id}\n            product={product}\n            onAddToCart={addToCart}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Search;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}