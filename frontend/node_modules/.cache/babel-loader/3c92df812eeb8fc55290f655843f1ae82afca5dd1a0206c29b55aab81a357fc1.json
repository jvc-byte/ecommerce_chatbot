{"ast":null,"code":"var _jsxFileName = \"/home/jvcbyte/Downloads/ecommerce/frontend/src/pages/Search.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport ProductCard from '../components/ProductCard';\nimport './Search.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Search = () => {\n  _s();\n  // const navigate = useNavigate();\n  const location = useLocation();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [setCart] = useState(JSON.parse(localStorage.getItem('cart') || '[]'));\n  const handleSearch = useCallback(async e => {\n    e.preventDefault();\n    if (searchTerm.trim() === '') return;\n    setLoading(true);\n    try {\n      const response = await fetch(`http://127.0.0.1:5000/api/products`);\n      if (!response.ok) throw new Error('Failed to fetch products');\n      const products = await response.json();\n\n      // Filter products based on search term\n      const filteredProducts = products.filter(product => product.name.toLowerCase().includes(searchTerm.toLowerCase()) || product.description.toLowerCase().includes(searchTerm.toLowerCase()));\n      setResults(filteredProducts);\n    } catch (error) {\n      console.error('Error fetching products:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [searchTerm]);\n  useEffect(() => {\n    // Get search query from URL params\n    const params = new URLSearchParams(location.search);\n    const query = params.get('q');\n    if (query) {\n      setSearchTerm(query);\n      handleSearch();\n    }\n\n    // Update cart state from localStorage\n    const currentCart = JSON.parse(localStorage.getItem('cart') || '[]');\n    setCart(currentCart);\n  }, [handleSearch]);\n  const addToCart = useCallback(product => {\n    // Update cart state\n    setCart(prev => {\n      const existingItem = prev.find(item => item.id === product.id);\n      if (existingItem) {\n        return prev.map(item => item.id === product.id ? {\n          ...item,\n          quantity: (item.quantity || 1) + 1\n        } : item);\n      }\n      return [...prev, {\n        ...product,\n        quantity: 1\n      }];\n    });\n\n    // Update localStorage\n    const currentCart = JSON.parse(localStorage.getItem('cart') || '[]');\n    const existingItem = currentCart.find(item => item.id === product.id);\n    if (existingItem) {\n      const updatedCart = currentCart.map(item => item.id === product.id ? {\n        ...item,\n        quantity: (item.quantity || 1) + 1\n      } : item);\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\n    } else {\n      const newCart = [...currentCart, {\n        ...product,\n        quantity: 1\n      }];\n      localStorage.setItem('cart', JSON.stringify(newCart));\n    }\n\n    // Update results to show updated quantities\n    setResults(prev => prev.map(item => item.id === product.id ? {\n      ...item,\n      quantity: (item.quantity || 1) + 1\n    } : item));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Search Results\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSearch,\n      className: \"search-form\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: searchTerm,\n        onChange: e => setSearchTerm(e.target.value),\n        placeholder: \"Search for products...\",\n        className: \"search-input\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"search-button\",\n        children: \"Search\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 7\n    }, this), loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Searching for products...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 9\n    }, this), results.length === 0 && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-results\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"No products found matching \\\"\", searchTerm, \"\\\"\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Try searching with different keywords or check our categories page.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"products-grid\",\n      children: results.map(product => /*#__PURE__*/_jsxDEV(ProductCard, {\n        product: product,\n        onAddToCart: addToCart\n      }, product.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n};\n_s(Search, \"+2Pd86D2Qx1o6zOFCF0/GbSQxyc=\", false, function () {\n  return [useLocation];\n});\n_c = Search;\nexport default Search;\nvar _c;\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useNavigate","useLocation","ProductCard","jsxDEV","_jsxDEV","Search","_s","location","searchTerm","setSearchTerm","results","setResults","loading","setLoading","setCart","JSON","parse","localStorage","getItem","handleSearch","e","preventDefault","trim","response","fetch","ok","Error","products","json","filteredProducts","filter","product","name","toLowerCase","includes","description","error","console","params","URLSearchParams","search","query","get","currentCart","addToCart","prev","existingItem","find","item","id","map","quantity","updatedCart","setItem","stringify","newCart","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","value","onChange","target","placeholder","length","onAddToCart","_c","$RefreshReg$"],"sources":["/home/jvcbyte/Downloads/ecommerce/frontend/src/pages/Search.js"],"sourcesContent":["import React, { useState, useEffect, useCallback } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport ProductCard from '../components/ProductCard';\nimport './Search.css';\n\nconst Search = () => {\n  // const navigate = useNavigate();\n  const location = useLocation();\n  const [searchTerm, setSearchTerm] = useState('');\n  const [results, setResults] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [setCart] = useState(JSON.parse(localStorage.getItem('cart') || '[]'));\n\n  const handleSearch = useCallback(async (e) => {\n    e.preventDefault();\n    if (searchTerm.trim() === '') return;\n\n    setLoading(true);\n    try {\n      const response = await fetch(`http://127.0.0.1:5000/api/products`);\n      if (!response.ok) throw new Error('Failed to fetch products');\n      const products = await response.json();\n      \n      // Filter products based on search term\n      const filteredProducts = products.filter(product =>\n        product.name.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        product.description.toLowerCase().includes(searchTerm.toLowerCase())\n      );\n      \n      setResults(filteredProducts);\n    } catch (error) {\n      console.error('Error fetching products:', error);\n    } finally {\n      setLoading(false);\n    }\n  }, [searchTerm]);\n\n  useEffect(() => {\n    // Get search query from URL params\n    const params = new URLSearchParams(location.search);\n    const query = params.get('q');\n    if (query) {\n      setSearchTerm(query);\n      handleSearch();\n    }\n\n    // Update cart state from localStorage\n    const currentCart = JSON.parse(localStorage.getItem('cart') || '[]');\n    setCart(currentCart);\n  }, [handleSearch]);\n\n  const addToCart = useCallback((product) => {\n    // Update cart state\n    setCart(prev => {\n      const existingItem = prev.find(item => item.id === product.id);\n      if (existingItem) {\n        return prev.map(item => \n          item.id === product.id \n            ? { ...item, quantity: (item.quantity || 1) + 1 }\n            : item\n        );\n      }\n      return [...prev, {\n        ...product,\n        quantity: 1\n      }];\n    });\n\n    // Update localStorage\n    const currentCart = JSON.parse(localStorage.getItem('cart') || '[]');\n    const existingItem = currentCart.find(item => item.id === product.id);\n    if (existingItem) {\n      const updatedCart = currentCart.map(item => \n        item.id === product.id \n          ? { ...item, quantity: (item.quantity || 1) + 1 }\n          : item\n      );\n      localStorage.setItem('cart', JSON.stringify(updatedCart));\n    } else {\n      const newCart = [...currentCart, {\n        ...product,\n        quantity: 1\n      }];\n      localStorage.setItem('cart', JSON.stringify(newCart));\n    }\n\n    // Update results to show updated quantities\n    setResults(prev => prev.map(item => \n      item.id === product.id \n        ? { ...item, quantity: (item.quantity || 1) + 1 }\n        : item\n    ));\n  }, []);\n\n  return (\n    <div className=\"search-container\">\n      <h1>Search Results</h1>\n      \n      <form onSubmit={handleSearch} className=\"search-form\">\n        <input\n          type=\"text\"\n          value={searchTerm}\n          onChange={(e) => setSearchTerm(e.target.value)}\n          placeholder=\"Search for products...\"\n          className=\"search-input\"\n        />\n        <button type=\"submit\" className=\"search-button\">\n          Search\n        </button>\n      </form>\n\n      {loading && (\n        <div className=\"loading-container\">\n          <div className=\"loading-spinner\"></div>\n          <p>Searching for products...</p>\n        </div>\n      )}\n\n      {results.length === 0 && !loading && (\n        <div className=\"no-results\">\n          <p>No products found matching \"{searchTerm}\"</p>\n          <p>Try searching with different keywords or check our categories page.</p>\n        </div>\n      )}\n\n      <div className=\"products-grid\">\n        {results.map((product) => (\n          <ProductCard\n            key={product.id}\n            product={product}\n            onAddToCart={addToCart}\n          />\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default Search;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}